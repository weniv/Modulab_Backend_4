# ë°°ê·¼í˜¸ í”„ë¡œì íŠ¸ ì½”ë“œ ë¦¬ë·°

## í”„ë¡œì íŠ¸ ì†Œê°œ
AI ì ì–¸ ì±—ë´‡ì€ í˜„ëŒ€ì¸ì˜ ì •ì„œì  ìœ„ë¡œì™€ ì§€í˜œë¥¼ ì œê³µí•˜ëŠ” AI ê¸°ë°˜ ìƒë‹´ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ í˜„ì¬ì˜ ê°ì •ì´ë‚˜ ê³ ë¯¼ì„ ì…ë ¥í•˜ë©´, OpenAIì˜ GPT ëª¨ë¸ì´ ì‚¬ìš©ìì˜ ê°ì • ìƒíƒœë¥¼ ë¶„ì„í•˜ê³ , ê·¸ì— ë§ëŠ” ì„±ê²½ ì ì–¸ê³¼ í•¨ê»˜ ë”°ëœ»í•œ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤. íšŒì› ê°€ì…ê³¼ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ í†µí•´ ê°œì¸í™”ëœ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë©°, ëŒ€í™” ê¸°ë¡ì„ ì €ì¥í•˜ì—¬ ì§€ì†ì ì¸ ì •ì„œì  ì§€ì›ì„ í•©ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ì •ë³´
- **í”„ë¡œì íŠ¸ëª…**: AI ì ì–¸ ì±—ë´‡ (Proverb-Recommending AI Chatbot)
- **ì €ì¥ì†Œ**: https://github.com/ë°°ê·¼í˜¸/proverb-ai-chatbot
- **ê¸°ìˆ  ìŠ¤íƒ**: FastAPI, OpenAI API, HTML/CSS/JavaScript, JWT ì¸ì¦
- **ëª©í‘œ**: ì‚¬ìš©ìì˜ ê°ì •ì„ AIê°€ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ ì„±ê²½ ì ì–¸ì„ ì¶”ì²œí•˜ëŠ” ì±—ë´‡

## ì˜ëœ ì  ğŸ‘

### 1. ì²´ê³„ì ì¸ í”„ë¡œì íŠ¸ êµ¬ì¡°
- README.mdê°€ ë§¤ìš° ì˜ ì‘ì„±ë˜ì–´ ìˆìŒ (í”„ë¡œì íŠ¸ ì†Œê°œ, ì„¤ì¹˜ ë°©ë²•, API ë¬¸ì„œ, WBS ë“±)
- í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ì½”ë“œê°€ ì˜ ë¶„ë¦¬ë˜ì–´ ìˆìŒ
- ì™€ì´ì–´í”„ë ˆì„ê³¼ ì‹œì—° ì˜ìƒê¹Œì§€ ì¤€ë¹„í•œ ì ì´ í›Œë¥­í•¨

### 2. ê¸°ìˆ ì  êµ¬í˜„
- JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
- ì‚¬ìš©ìë³„ ì±„íŒ… ê¸°ë¡ ì €ì¥ ê¸°ëŠ¥
- AIë¥¼ í™œìš©í•œ ê°ì • ë¶„ì„ ë° ë§ì¶¤í˜• ì‘ë‹µ
- ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í†µí•œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- CORS ì„¤ì •ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ í†µì‹  ì²˜ë¦¬

### 3. UI/UX ì„¤ê³„
- ê¹”ë”í•œ ë””ìì¸ê³¼ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤
- ë¡œë”© ìƒíƒœ í‘œì‹œë¡œ ì‚¬ìš©ì í”¼ë“œë°± ì œê³µ
- ì±„íŒ… ê¸°ë¡ ëª¨ë‹¬ë¡œ ì´ì „ ëŒ€í™” í™•ì¸ ê°€ëŠ¥
- CSS ë³€ìˆ˜ë¥¼ í™œìš©í•œ í…Œë§ˆ ê´€ë¦¬

### 4. ì½”ë“œ í’ˆì§ˆ
- ì£¼ì„ì´ ì ì ˆíˆ ì‘ì„±ë˜ì–´ ìˆìŒ
- ì—ëŸ¬ ì²˜ë¦¬ê°€ ì˜ ë˜ì–´ìˆìŒ
- ì½”ë“œ êµ¬ì¡°ê°€ ëª…í™•í•˜ê³  ì½ê¸° ì‰¬ì›€

## ê°œì„ ì´ í•„ìš”í•œ ì  ë° ë³´ì™„ ë°©ë²• âš ï¸

### 1. ë³´ì•ˆ ê°•í™” í•„ìš”
**ë¬¸ì œì **: 
- JWT SECRET_KEYê°€ í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŒ
- CORS ì„¤ì •ì´ ëª¨ë“  originì„ í—ˆìš©(`*`)
- ë¹„ë°€ë²ˆí˜¸ ë³µì¡ë„ ê²€ì¦ì´ ì—†ìŒ

**ë³´ì™„ ë°©ë²•**:
```python
# í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
import os
from dotenv import load_dotenv

load_dotenv()
SECRET_KEY = os.getenv("JWT_SECRET_KEY")
if not SECRET_KEY:
    raise ValueError("JWT_SECRET_KEY must be set")

# CORS íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©
app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://your-frontend-domain.com"],
    allow_credentials=True,
    allow_methods=["GET", "POST"],
    allow_headers=["Authorization", "Content-Type"],
)

# ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ì¶”ê°€
import re

def validate_password(password: str) -> bool:
    if len(password) < 8:
        return False
    if not re.search(r"[A-Z]", password):
        return False
    if not re.search(r"[a-z]", password):
        return False
    if not re.search(r"\d", password):
        return False
    if not re.search(r"[!@#$%^&*]", password):
        return False
    return True
```

### 2. ë°ì´í„° ì˜ì†ì„±
**ë¬¸ì œì **: ë©”ëª¨ë¦¬ì—ë§Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ë¯€ë¡œ ì„œë²„ ì¬ì‹œì‘ ì‹œ ëª¨ë“  ë°ì´í„°ê°€ ì‚¬ë¼ì§

**ë³´ì™„ ë°©ë²•**:
```python
# SQLAlchemyë¥¼ ì‚¬ìš©í•œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
from sqlalchemy import create_engine, Column, String, DateTime, Text
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

DATABASE_URL = "sqlite:///./proverb_chatbot.db"
engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
Base = declarative_base()

class User(Base):
    __tablename__ = "users"
    email = Column(String, primary_key=True, index=True)
    hashed_password = Column(String)
    nickname = Column(String)

class ChatHistory(Base):
    __tablename__ = "chat_history"
    id = Column(Integer, primary_key=True, index=True)
    user_email = Column(String, ForeignKey("users.email"))
    prompt = Column(Text)
    response = Column(JSON)
    timestamp = Column(DateTime, default=datetime.utcnow)
```

### 3. ì…ë ¥ ê²€ì¦ ê°•í™”
**ë¬¸ì œì **: Pydantic ëª¨ë¸ì— í•„ë“œ ê²€ì¦ì´ ì—†ìŒ

**ë³´ì™„ ë°©ë²•**:
```python
from pydantic import BaseModel, EmailStr, Field, validator

class UserIn(BaseModel):
    email: EmailStr
    password: str = Field(..., min_length=8, max_length=100)
    nickname: str = Field(..., min_length=2, max_length=20)
    
    @validator('password')
    def validate_password(cls, v):
        if not validate_password(v):
            raise ValueError('ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ, ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.')
        return v

class ChatRequest(BaseModel):
    prompt: str = Field(..., min_length=1, max_length=500)
    
    @validator('prompt')
    def validate_prompt(cls, v):
        if not v.strip():
            raise ValueError('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.')
        return v.strip()
```

### 4. ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
**ë¬¸ì œì **: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì—ëŸ¬ ì²˜ë¦¬ê°€ alertë¡œë§Œ ë˜ì–´ìˆìŒ

**ë³´ì™„ ë°©ë²•**:
```javascript
// í† ìŠ¤íŠ¸ ë©”ì‹œì§€ êµ¬í˜„
class ToastNotification {
    static show(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.textContent = message;
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.classList.add('show');
        }, 100);
        
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
try {
    const response = await fetch(...);
    if (!response.ok) throw new Error();
    ToastNotification.show('íšŒì›ê°€ì… ì„±ê³µ!', 'success');
} catch (error) {
    ToastNotification.show('íšŒì›ê°€ì… ì‹¤íŒ¨', 'error');
}
```

### 5. í”„ë¡ íŠ¸ì—”ë“œ ë³´ì•ˆ
**ë¬¸ì œì **: XSS ê³µê²©ì— ì·¨ì•½í•œ innerHTML ì‚¬ìš©

**ë³´ì™„ ë°©ë²•**:
```javascript
// DOMPurify ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
import DOMPurify from 'dompurify';

// ì•ˆì „í•œ HTML ë Œë”ë§
const safeHTML = DOMPurify.sanitize(
    `<p>[${proverbData.verse}] ${proverbData.content}</p>
     <p>${proverbData.comment}</p>`
);
loadingMessage.querySelector(".message-bubble").innerHTML = safeHTML;

// ë˜ëŠ” DOM APIë¥¼ ì‚¬ìš©í•œ ì•ˆì „í•œ ë Œë”ë§
function createProverbElement(proverbData) {
    const bubble = document.createElement('div');
    bubble.className = 'message-bubble';
    
    const verse = document.createElement('p');
    verse.textContent = `[${proverbData.verse}] ${proverbData.content}`;
    
    const comment = document.createElement('p');
    comment.textContent = proverbData.comment;
    
    bubble.appendChild(verse);
    bubble.appendChild(comment);
    return bubble;
}
```

### 6. ì„±ëŠ¥ ìµœì í™”
**ë¬¸ì œì **: ëª¨ë“  ì±„íŒ… ê¸°ë¡ì„ í•œ ë²ˆì— ë¶ˆëŸ¬ì˜´

**ë³´ì™„ ë°©ë²•**:
```python
# í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„
@app.get("/history")
async def get_chat_history(
    current_user: dict = Depends(get_current_user),
    skip: int = 0,
    limit: int = 20
):
    user_email = current_user.get("email")
    history = chat_history_db.get(user_email, [])
    
    # ìµœì‹  ë©”ì‹œì§€ë¶€í„° ë°˜í™˜
    return {
        "total": len(history),
        "items": history[skip:skip + limit][::-1]
    }
```

### 7. ë¡œê¹… ì‹œìŠ¤í…œ êµ¬í˜„
**ë¬¸ì œì **: printë¬¸ìœ¼ë¡œë§Œ ë””ë²„ê¹…

**ë³´ì™„ ë°©ë²•**:
```python
import logging
from logging.handlers import RotatingFileHandler

# ë¡œê¹… ì„¤ì •
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# íŒŒì¼ í•¸ë“¤ëŸ¬ ì¶”ê°€
file_handler = RotatingFileHandler(
    'app.log', maxBytes=10485760, backupCount=5
)
file_handler.setFormatter(
    logging.Formatter('%(asctime)s %(levelname)s: %(message)s')
)
logger.addHandler(file_handler)

# ì‚¬ìš© ì˜ˆì‹œ
logger.info(f"New user registered: {user.email}")
logger.error(f"API error: {e}")
```

### 8. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
**ë¬¸ì œì **: í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì—†ìŒ

**ë³´ì™„ ë°©ë²•**:
```python
# test_main.py
import pytest
from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

def test_register_user():
    response = client.post("/register", json={
        "email": "test@example.com",
        "password": "Test1234!",
        "nickname": "í…ŒìŠ¤í„°"
    })
    assert response.status_code == 200
    assert "íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤" in response.json()["message"]

def test_login():
    response = client.post("/login", data={
        "username": "test@example.com",
        "password": "Test1234!"
    })
    assert response.status_code == 200
    assert "access_token" in response.json()
```

## ì¶”ê°€ ê°œì„  ì•„ì´ë””ì–´ ğŸ’¡
1. **ë‹¤í¬ ëª¨ë“œ ì§€ì›**: CSS ë³€ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ë‹¤í¬ ëª¨ë“œ êµ¬í˜„
2. **ë‹¤êµ­ì–´ ì§€ì›**: i18n ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œ ë‹¤êµ­ì–´ ì§€ì›
3. **PWA êµ¬í˜„**: ì˜¤í”„ë¼ì¸ì—ì„œë„ ì¼ë¶€ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥
4. **ì›¹ì†Œì¼“ í†µì‹ **: ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥ êµ¬í˜„
5. **ê°ì • ë¶„ì„ ê°œì„ **: ë” ë‹¤ì–‘í•œ ê°ì • ì¹´í…Œê³ ë¦¬ ì¶”ê°€
6. **ìŒì„± ì…ë ¥**: Web Speech APIë¥¼ í™œìš©í•œ ìŒì„± ì…ë ¥ ê¸°ëŠ¥

## ì¶”ì²œ í•™ìŠµ ìë£Œ ğŸ“š
1. **FastAPI ë³´ì•ˆ**: https://fastapi.tiangolo.com/tutorial/security/
2. **JWT ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤**: https://www.rfc-editor.org/rfc/rfc8725.html
3. **SQLAlchemy íŠœí† ë¦¬ì–¼**: https://docs.sqlalchemy.org/en/14/tutorial/
4. **í”„ë¡ íŠ¸ì—”ë“œ ë³´ì•ˆ**: https://cheatsheetseries.owasp.org/cheatsheets/DOM_based_XSS_Prevention_Cheat_Sheet.html
5. **Python ë¡œê¹…**: https://docs.python.org/3/howto/logging.html

## ì¢…í•© í‰ê°€
ë§¤ìš° ì™„ì„±ë„ ë†’ì€ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. íŠ¹íˆ ì‚¬ìš©ì ê²½í—˜ì„ ê³ ë ¤í•œ UI/UX ì„¤ê³„ì™€ AIë¥¼ í™œìš©í•œ ê°ì • ë¶„ì„ ê¸°ëŠ¥ì´ ì¸ìƒì ì…ë‹ˆë‹¤. ë‹¤ë§Œ ë³´ì•ˆê³¼ ë°ì´í„° ì˜ì†ì„± ë¶€ë¶„ì„ ë³´ì™„í•˜ë©´ ì‹¤ì œ ì„œë¹„ìŠ¤ë¡œë„ ì¶©ë¶„íˆ í™œìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ì´ ë  ê²ƒì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì—´ì •ê³¼ ë…¸ë ¥ì´ ë‹ë³´ì´ë©°, ì½”ë“œ í’ˆì§ˆë„ ì´ˆë³´ì ìˆ˜ì¤€ì„ ë„˜ì–´ì„°ìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œ ì œì•ˆëœ ê°œì„ ì‚¬í•­ë“¤ì„ í•˜ë‚˜ì”© ì ìš©í•´ ë‚˜ê°€ë©´ ë”ìš± í›Œë¥­í•œ ê°œë°œìê°€ ë  ê²ƒìœ¼ë¡œ ê¸°ëŒ€ë©ë‹ˆë‹¤.